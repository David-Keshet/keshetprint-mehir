<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
<title>××—×©×‘×•×Ÿ ××—×™×¨×™ ×”×“×¤×¡×”</title>
<link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700;800;900&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet"/>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Assistant',sans-serif;}
html,body{height:100%;background:#eef2ff;}

/* â”€â”€ HEADER â”€â”€ */
#hdr{
  height:56px;background:linear-gradient(135deg,#1e40af,#7c3aed);
  display:flex;align-items:center;padding:0 18px;gap:12px;
  box-shadow:0 3px 16px rgba(30,64,175,.35);position:sticky;top:0;z-index:100;
}
#hdr h1{color:#fff;font-size:18px;font-weight:900;letter-spacing:-.3px;}
#hdr .sub{color:rgba(255,255,255,.5);font-size:11px;margin-right:auto;}

/* â”€â”€ LAYOUT desktop â”€â”€ */
#wrap{display:flex;height:calc(100vh - 56px);}
#form{flex:1;overflow-y:auto;padding:14px;display:flex;flex-direction:column;gap:12px;min-width:0;}
#side{width:360px;min-width:340px;overflow-y:auto;background:#fff;border-right:1px solid #c7d2fe;
  display:flex;flex-direction:column;box-shadow:-4px 0 20px rgba(99,102,241,.08);}

/* â”€â”€ MOBILE: stack layout â”€â”€ */
@media(max-width:768px){
  html,body{height:auto;overflow:auto;}
  #wrap{flex-direction:column;height:auto;}
  #form{overflow-y:visible;padding:10px;}
  #side{width:100%;min-width:0;border-right:none;border-top:1px solid #c7d2fe;}
}

/* â”€â”€ CARD â”€â”€ */
.card{background:#fff;border-radius:14px;border:1px solid #e0e7ff;
  box-shadow:0 1px 6px rgba(0,0,0,.05);padding:14px;}
.ct{font-size:11px;font-weight:800;letter-spacing:.07em;text-transform:uppercase;
  margin-bottom:12px;display:flex;align-items:center;gap:7px;}
.ct-dot{width:9px;height:9px;border-radius:50%;flex-shrink:0;}

/* â”€â”€ LABEL â”€â”€ */
.lbl{display:block;font-size:10px;font-weight:800;color:#6366f1;
  margin-bottom:4px;letter-spacing:.05em;text-transform:uppercase;}

/* â”€â”€ INPUT â”€â”€ */
.inp{width:100%;padding:10px 11px;border-radius:10px;border:1.5px solid #e0e7ff;
  background:#f8f9ff;font-size:15px;font-weight:700;text-align:right;outline:none;
  color:#1e293b;transition:all .15s;-webkit-appearance:none;appearance:none;}
.inp:focus{border-color:#6366f1;box-shadow:0 0 0 3px rgba(99,102,241,.13);background:#fff;}
select.inp{cursor:pointer;padding-left:28px;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3E%3Cpath stroke='%236366f1' stroke-width='1.5' fill='none' d='M6 8l4 4 4-4'/%3E%3C/svg%3E");
  background-repeat:no-repeat;background-position:left 6px center;background-size:18px;}
/* hide native number arrows on desktop */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;}
input[type=number]{-moz-appearance:textfield;}

/* â”€â”€ SPINNER â”€â”€ */
.spin{position:relative;}
.spin .inp{padding-left:34px;}
.sbtns{position:absolute;left:0;top:0;bottom:0;width:30px;display:flex;flex-direction:column;}
.sb{flex:1;background:#eef2ff;border:none;cursor:pointer;color:#6366f1;font-size:10px;
  display:flex;align-items:center;justify-content:center;transition:background .1s;
  user-select:none;border-right:1px solid #e0e7ff;touch-action:manipulation;}
.sb:first-child{border-bottom:1px solid #e0e7ff;border-radius:0 9px 0 0;}
.sb:last-child{border-radius:0 0 9px 0;}
.sb:hover,.sb:active{background:#c7d2fe;}

/* â”€â”€ TYPE BUTTONS â”€â”€ */
.tbg{display:flex;gap:7px;}
.tb{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:4px;padding:12px 5px;border:2px solid #e0e7ff;border-radius:11px;cursor:pointer;
  transition:all .15s;background:#f8f9ff;touch-action:manipulation;}
.tb:hover,.tb:active{border-color:#a5b4fc;}
.tb.on{border-color:#6366f1;background:#eef2ff;box-shadow:0 0 0 3px rgba(99,102,241,.12);}
.tb .ico{font-family:'Material Symbols Outlined';font-size:24px;color:#94a3b8;line-height:1;}
.tb.on .ico{color:#6366f1;}
.tb .nm{font-size:13px;font-weight:800;color:#334155;}
.tb.on .nm{color:#4338ca;}
.tb .sub{font-size:9px;color:#94a3b8;font-weight:600;}

/* â”€â”€ PILLS â”€â”€ */
.pillg{display:flex;flex-wrap:wrap;gap:7px;}
.pill{padding:8px 18px;border-radius:999px;border:1.5px solid #e0e7ff;font-size:13px;
  font-weight:700;cursor:pointer;background:#f8f9ff;color:#475569;transition:all .15s;
  touch-action:manipulation;}
.pill:hover,.pill:active{border-color:#6366f1;color:#4338ca;}
.pill.on{background:#6366f1;color:#fff;border-color:#6366f1;box-shadow:0 2px 10px rgba(99,102,241,.3);}

/* â”€â”€ GRIDS â”€â”€ */
.g2{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
.g3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;}
.g4{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:9px;}
@media(max-width:600px){
  .g4{grid-template-columns:1fr 1fr;}
  .g3{grid-template-columns:1fr 1fr;}
}

/* â”€â”€ ALERTS â”€â”€ */
.abox{border-radius:9px;padding:8px 12px;font-size:12px;font-weight:700;display:flex;align-items:center;gap:8px;}
.ab-blue{background:#eff6ff;border:1px solid #bfdbfe;color:#1d4ed8;}
.ab-yellow{background:#fefce8;border:1px solid #fde047;color:#854d0e;}

/* â”€â”€ SIDE HEADER â”€â”€ */
.side-hdr{padding:18px 20px;background:linear-gradient(135deg,#1e40af,#7c3aed);color:#fff;flex-shrink:0;}
.side-hdr .slabel{font-size:11px;font-weight:700;opacity:.6;margin-bottom:5px;text-transform:uppercase;letter-spacing:.05em;}
.side-hdr .stitle{font-size:16px;font-weight:900;margin-bottom:2px;}
.side-hdr .sdetail{font-size:12px;opacity:.65;}

/* â”€â”€ PRICE BOX â€” BIG â”€â”€ */
.price-box{
  margin:16px;border-radius:18px;padding:28px 20px;text-align:center;
  background:linear-gradient(135deg,#1e40af,#7c3aed);
  color:#fff;box-shadow:0 6px 28px rgba(99,102,241,.3);
}
.price-box .plabel{font-size:12px;font-weight:700;opacity:.7;margin-bottom:8px;letter-spacing:.03em;}
.price-box .pbig{font-size:60px;font-weight:900;letter-spacing:-3px;line-height:1;}
.price-box .psub{font-size:13px;opacity:.6;margin-top:8px;}
.price-box .pbadge{display:inline-block;margin-top:12px;background:rgba(255,255,255,.2);
  border-radius:999px;padding:5px 18px;font-size:12px;font-weight:700;}

/* â”€â”€ UNIT ROW â”€â”€ */
.unit-row{margin:0 16px;padding:14px 18px;background:#f8f9ff;border-radius:12px;
  border:1px solid #e0e7ff;display:flex;justify-content:space-between;align-items:center;}
.unit-row span{font-size:13px;color:#64748b;font-weight:600;}
.unit-row b{font-size:22px;font-weight:900;color:#4338ca;}

/* â”€â”€ BREAKDOWN â”€â”€ */
.breakdown{margin:0 16px;background:#f8f9ff;border-radius:12px;border:1px solid #e0e7ff;padding:14px 16px;}
.breakdown h4{font-size:10px;font-weight:800;color:#6366f1;text-transform:uppercase;letter-spacing:.06em;margin-bottom:10px;}
.brow{display:flex;justify-content:space-between;font-size:13px;color:#475569;padding:4px 0;}
.brow b{font-size:13px;font-weight:800;color:#1e293b;}
.brow.tot{border-top:2px solid #e0e7ff;margin-top:8px;padding-top:10px;}
.brow.tot span{font-size:15px;font-weight:800;color:#1e293b;}
.brow.tot b{font-size:18px;color:#4338ca;}

/* â”€â”€ TABLE â”€â”€ */
table{width:100%;border-collapse:collapse;font-size:12px;}
th{padding:7px 8px;text-align:right;font-weight:800;color:#6366f1;background:#eef2ff;border-bottom:2px solid #c7d2fe;}
td{padding:6px 8px;border-bottom:1px solid #f1f5f9;color:#475569;}
tr.hl td{background:#eef2ff;font-weight:800;color:#3730a3;}
tr.hl td:nth-child(2){color:#6366f1;}
tr:not(.hl):hover td{background:#f8f9ff;}

.min-note{font-size:11px;text-align:center;color:#f59e0b;font-weight:700;padding:4px 16px;display:none;}
.max-warn{margin:0 16px;padding:10px 14px;background:#fef2f2;border:1.5px solid #fca5a5;
  border-radius:10px;font-size:12px;font-weight:700;color:#dc2626;text-align:center;display:none;}

/* â”€â”€ WHATSAPP BUTTON â€” × ×™×™×“ ×‘×œ×‘×“ â”€â”€ */
.wa-wrap{
  display:none; /* ××•×¡×ª×¨ ×‘×“×¡×§×˜×•×¤ */
  padding:16px;
}
.wa-btn{
  width:100%;border:none;
  background:linear-gradient(135deg,#25d366,#128c7e);
  border-radius:14px;padding:16px 20px;
  font-size:16px;font-weight:900;color:#fff;
  cursor:pointer;display:flex;align-items:center;justify-content:center;
  gap:10px;box-shadow:0 4px 16px rgba(37,211,102,.35);
  transition:opacity .15s;touch-action:manipulation;
  letter-spacing:.01em;
}
.wa-btn:active{opacity:.85;}
@media(max-width:768px){
  .wa-wrap{display:block;}
}

/* â”€â”€ WHATSAPP BUTTON â”€â”€ */
.wa-wrap{
  padding:16px;
  /* ××•×¦×’ ×ª××™×“ ×‘× ×™×™×“, ××•×¡×ª×¨ ×‘×“×¡×§×˜×•×¤ */
}
@media(min-width:769px){ .wa-wrap{ display:none; } }

.wa-btn{
  width:100%;border:none;border-radius:14px;
  background:linear-gradient(135deg,#25d366,#128c3b);
  color:#fff;font-size:16px;font-weight:900;
  padding:16px 20px;display:flex;align-items:center;justify-content:center;
  gap:10px;cursor:pointer;
  box-shadow:0 4px 16px rgba(37,211,102,.35);
  transition:opacity .15s;touch-action:manipulation;
}
.wa-btn:active{ opacity:.85; }

/* â”€â”€ RESET BTN â”€â”€ */
.reset-btn{
  background:none;border:none;color:rgba(255,255,255,.6);font-size:12px;font-weight:700;
  cursor:pointer;display:flex;align-items:center;gap:4px;padding:4px 8px;border-radius:6px;
  transition:all .15s;touch-action:manipulation;
}
.reset-btn:hover{background:rgba(255,255,255,.15);color:#fff;}
.reset-btn .ico{font-family:'Material Symbols Outlined';font-size:16px;}

/* side padding helper */
.sp{padding:0 16px;}
.gap{height:12px;}
</style>
</head>
<body>

<div id="hdr">
  <span style="font-family:'Material Symbols Outlined';color:#fff;font-size:26px;">print</span>
  <h1>××—×©×‘×•×Ÿ ××—×™×¨×™ ×”×“×¤×¡×”</h1>
  <span class="sub">×¤×¨×™× ×˜-×¤×¨×• ×¡×˜×•×“×™×•</span>
  <button class="reset-btn" onclick="××¤×¡×”×›×œ()" title="××¤×¡ ×”×›×œ">
    <span class="ico">restart_alt</span>××¤×¡
  </button>
</div>

<div id="wrap">

<!-- â•â•â•â•â•â•â• FORM â•â•â•â•â•â•â• -->
<div id="form">

  <!-- ×›×¨×˜×™×¡ 1: ×¡×•×’ ×—×•×‘×¨×ª â€” ×¨××©×•×Ÿ! -->
  <div class="card">
    <div class="ct" style="color:#6366f1;">
      <div class="ct-dot" style="background:#6366f1;"></div>×¡×•×’ ×—×•×‘×¨×ª
    </div>
    <div class="tbg">
      <button class="tb on" id="btn-saddle" onclick="×‘×—×¨×¡×•×’('saddle')">
        <span class="ico">auto_stories</span>
        <span class="nm">×¡×™×›×•×ª</span>
        <span class="sub">Saddle Stitch</span>
      </button>
      <button class="tb" id="btn-perfect" onclick="×‘×—×¨×¡×•×’('perfect')">
        <span class="ico">menu_book</span>
        <span class="nm">×“×‘×§</span>
        <span class="sub">Perfect Bound</span>
      </button>
      <button class="tb" id="btn-wire" onclick="×‘×—×¨×¡×•×’('wire')">
        <span class="ico">reorder</span>
        <span class="nm">×¡×¤×™×¨×œ×”</span>
        <span class="sub">Wire-O</span>
      </button>
    </div>
    <div id="saddleNote" class="abox ab-blue" style="display:flex;margin-top:10px;">ğŸ”’ ×—×•×‘×¨×ª ×¡×™×›×•×ª â€” ×ª××™×“ ×“×•-×¦×“×“×™×ª Â· ×¢××•×“×™× = ××›×¤×œ×•×ª 4</div>
  </div>

  <!-- ×›×¨×˜×™×¡ 2: ×¤×¨×˜×™ ×—×•×‘×¨×ª -->
  <div class="card">
    <div class="ct" style="color:#0891b2;">
      <div class="ct-dot" style="background:#0891b2;"></div>×¤×¨×˜×™ ×”×—×•×‘×¨×ª
    </div>

    <div class="g4" style="align-items:end;margin-bottom:10px;">
      <!-- ×’×•×“×œ -->
      <div>
        <label class="lbl">×’×•×“×œ × ×™×™×¨</label>
        <select id="paperSize" class="inp" onchange="×¢×“×›×Ÿ×’×•×“×œ()" onkeydown="×˜××‘(event,'paperSize')">
          <option value="a4">A4</option>
          <option value="a5">A5</option>
          <option value="half8">×—×¦×™ ×©××™× ×™×ª (17.5Ã—24.8)</option>
          <option value="a3" id="opt-a3">A3</option>
        </select>
      </div>
      <!-- ×›××•×ª -->
      <div>
        <label class="lbl">×›××•×ª</label>
        <div class="spin">
          <div class="sbtns">
            <button class="sb" onmousedown="startSpin('quantity',1)" ontouchstart="startSpin('quantity',1)">â–²</button>
            <button class="sb" onmousedown="startSpin('quantity',-1)" ontouchstart="startSpin('quantity',-1)">â–¼</button>
          </div>
          <input id="quantity" class="inp" type="number" min="1" value="1"
            oninput="×—×©×‘××—×™×¨()" onkeydown="×˜××‘(event,'quantity')"
            onwheel="×’×œ×’×œ(event,'quantity',1)"/>
        </div>
      </div>
      <!-- ×¢××•×“×™× -->
      <div>
        <label class="lbl">×¢××•×“×™× <span id="pgHintLbl" style="color:#94a3b8;font-weight:600;font-size:9px;"></span></label>
        <div class="spin">
          <div class="sbtns">
            <button class="sb" id="pgUp" onmousedown="startSpin('pages',4)" ontouchstart="startSpin('pages',4)">â–²</button>
            <button class="sb" id="pgDn" onmousedown="startSpin('pages',-4)" ontouchstart="startSpin('pages',-4)">â–¼</button>
          </div>
          <input id="pages" class="inp" type="number" min="1" value="4"
            oninput="×“×—×™×™×ª×¢××•×“×™×()" onblur="×ª×§×Ÿ×¢××•×“×™×()"
            onkeydown="×˜××‘(event,'pages')"
            onwheel="×’×œ×’×œ(event,'pages',4)"/>
        </div>
        <div id="pgHint" style="font-size:10px;color:#94a3b8;margin-top:3px;"></div>
      </div>
      <!-- × ×™×™×¨ -->
      <div>
        <label class="lbl">×¡×•×’ × ×™×™×¨</label>
        <select id="paperType" class="inp" onchange="×—×©×‘××—×™×¨()" onkeydown="×˜××‘(event,'paperType')">
          <option value="offset80">× ×™×™×¨ ×¨×’×™×œ</option>
          <option value="chrome130">130 ×’×¨× ×›×¨×•××• ×¤×¨×•</option>
          <option value="premium170">170 ×’×¨× ×¤×¨×™××™×•×</option>
        </select>
      </div>
    </div>

    <div id="warnBox" class="abox ab-yellow" style="display:none;margin-bottom:8px;">âš ï¸ ×¢××•×“×™× ×¢×•×’×œ×• ×œ××›×¤×œ×ª 4 (×‘×•×§×œ×˜)</div>
  </div>

  <!-- ×›×¨×˜×™×¡ 3: ×”×“×¤×¡×” -->
  <div class="card">
    <div class="ct" style="color:#0891b2;">
      <div class="ct-dot" style="background:#0891b2;"></div>×¡×•×’ ×”×“×¤×¡×”
    </div>
    <div class="g2">
      <div>
        <label class="lbl">×¦×‘×¢</label>
        <div class="tbg">
          <button class="tb" id="btn-color" onclick="×‘×—×¨×”×“×¤×¡×”('color')">
            <span class="ico" style="color:#ef4444;">palette</span>
            <span class="nm">×¦×‘×¢</span>
          </button>
          <button class="tb on" id="btn-bw" onclick="×‘×—×¨×”×“×¤×¡×”('bw')">
            <span class="ico">contrast</span>
            <span class="nm">×©×—×•×¨-×œ×‘×Ÿ</span>
          </button>
        </div>
      </div>
      <div id="doubleSideWrap">
        <label class="lbl">×¦×“×“×™×</label>
        <div class="tbg">
          <button class="tb on" id="btn-double" onclick="×‘×—×¨×¦×“('double')">
            <span class="ico">flip</span>
            <span class="nm">×“×•-×¦×“×“×™</span>
          </button>
          <button class="tb" id="btn-single" onclick="×‘×—×¨×¦×“('single')">
            <span class="ico">article</span>
            <span class="nm">×—×“-×¦×“×“×™</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- ×›×¨×˜×™×¡ 4: ×ª×•×¡×¤×•×ª -->
  <div class="card">
    <div class="ct" style="color:#7c3aed;">
      <div class="ct-dot" style="background:#7c3aed;"></div>×ª×•×¡×¤×•×ª ×œ×›×¨×™×›×”
    </div>
    <div id="coverWrap" style="margin-bottom:14px;">
      <label class="lbl">×’×‘ / ×›×¨×™×›×”</label>
      <div id="coverOptions" class="tbg"></div>
      <p id="coverHint" style="font-size:10px;color:#94a3b8;margin-top:5px;"></p>
    </div>
    <div>
      <label class="lbl">×œ××™× ×¦×™×” ×œ×›×¨×™×›×”</label>
      <div class="pillg" style="margin-top:6px;">
        <button class="pill on" onclick="×‘×—×¨×œ××™× ×¦×™×”(this,'none')">×œ×œ×</button>
        <button class="pill" onclick="×‘×—×¨×œ××™× ×¦×™×”(this,'matte')">××˜</button>
        <button class="pill" onclick="×‘×—×¨×œ××™× ×¦×™×”(this,'glossy')">××‘×¨×™×§</button>
      </div>
    </div>
  </div>

  <!-- ×›×¨×˜×™×¡ 5: ××“×¨×’ -->
  <div class="card">
    <div class="ct" style="color:#059669;">
      <div class="ct-dot" style="background:#059669;"></div>××“×¨×’ ××—×™×¨×™×
      <span style="margin-right:auto;font-size:10px;color:#94a3b8;font-weight:600;text-transform:none;letter-spacing:0;">××¡×•××Ÿ = ×”×›××•×ª ×©×œ×š</span>
    </div>
    <div id="tierTable" style="overflow-x:auto;"></div>
  </div>

</div>
<!-- â•â•â•â•â•â•â• END FORM â•â•â•â•â•â•â• -->

<!-- â•â•â•â•â•â•â• SIDE â•â•â•â•â•â•â• -->
<div id="side">

  <div class="side-hdr">
    <div class="slabel">×”×¦×¢×ª ××—×™×¨</div>
    <div class="stitle" id="summaryTitle">×—×•×‘×¨×ª ×¡×™×›×•×ª A4</div>
    <div class="sdetail" id="summaryDetails">1 ×™×—×™×“×” Â· 4 ×¢×' Â· ×©×—×•×¨-×œ×‘×Ÿ Â· ×“×•-×¦×“×“×™</div>
  </div>

  <!-- ××—×™×¨ ×¨××©×™ â€” ×’×“×•×œ -->
  <div class="price-box">
    <div class="plabel">×¡×”"×› ×œ×ª×©×œ×•× (×›×•×œ×œ ××¢"× 18%)</div>
    <div class="pbig" id="totalWithVat">â‚ª0</div>
    <div class="psub" id="totalNoVat">×œ×¤× ×™ ××¢"×: â‚ª0.00</div>
    <div class="pbadge" id="tierLabel">ğŸŸ¢ ×¡×˜× ×“×¨×˜×™</div>
  </div>

  <div class="max-warn" id="maxWarn">âš ï¸ ×”××—×™×¨ ×’×‘×•×” â€” ×‘×“×•×§ ×›××•×ª / ××¤×¨×˜</div>

  <div class="gap"></div>

  <!-- ××—×™×¨ ×œ×™×—×™×“×” -->
  <div class="unit-row">
    <span>××—×™×¨ ×œ×™×—×™×“×” (×œ×¤× ×™ ××¢"×)</span>
    <b id="pricePerUnit">â‚ª0.00</b>
  </div>

  <div class="gap"></div>

  <!-- ×¤×™×¨×•×˜ -->
  <div class="breakdown">
    <h4>×¤×™×¨×•×˜ ×”××—×™×¨</h4>
    <div class="brow"><span>×”×“×¤×¡×”</span><b id="costPrint">â‚ª0.00</b></div>
    <div class="brow"><span>× ×™×™×¨</span><b id="costPaper">â‚ª0.00</b></div>
    <div class="brow"><span>×›×¨×™×›×” ×•×’×™××•×¨</span><b id="costBinding">â‚ª0.00</b></div>
    <div class="brow"><span>×œ××™× ×¦×™×”</span><b id="costLam">â‚ª0.00</b></div>
    <div class="brow tot">
      <span>×¡×”"×› ×œ×¤× ×™ ××¢"×</span>
      <b id="costBeforeVat">â‚ª0.00</b>
    </div>
  </div>

  <div class="gap"></div>
  <div class="min-note" id="minNote"></div>

  <!-- ×”×‘×”×¨×” ×œ×œ×§×•×— -->
  <div style="margin:8px 16px 16px;padding:12px 14px;background:#f8f9ff;border:1px solid #e0e7ff;border-radius:12px;">
    <div style="font-size:11px;color:#64748b;line-height:1.7;text-align:right;">
      <span style="font-size:13px;">â„¹ï¸</span>
      ×”××—×™×¨×™× ×”××•×¦×’×™× ×”× <strong style="color:#4338ca;">×”×¢×¨×›×” ×‘×œ×‘×“</strong> ×•××™× × ××”×•×•×™× ×”×¦×¢×ª ××—×™×¨ ××—×™×™×‘×ª.
      ×”××—×™×¨ ×”×¡×•×¤×™ × ×§×‘×¢ ×œ××—×¨ ×‘×“×™×§×ª ×”×§×•×‘×¥ ×•××™×©×•×¨ ×”×”×–×× ×”.
      ×™×™×ª×›× ×• ×©×™× ×•×™×™× ×‘×”×ª×× ×œ××¤×¨×˜ ×”××“×•×™×§, ×¢×™×¦×•×‘ ×”×§×•×‘×¥ ×•×–××™× ×•×ª ×”×—×•××¨×™×.
      <br/><br/>
      ×œ××™×©×•×¨ ××—×™×¨ ×¡×•×¤×™ â€” ×× × ×¦×¨×• ×§×©×¨ ×™×©×™×¨×•×ª ×¢×× ×•.
    </div>
  </div>

  <!-- ×›×¤×ª×•×¨ ×”×–×× ×” ×•×•××˜×¡××¤ â€” × ×™×™×“ ×‘×œ×‘×“ -->
  <div class="wa-wrap">
    <button class="wa-btn" onclick="×©×œ×—×•×•××˜×¡××¤()">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="white">
        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
      </svg>
      ×”×–××Ÿ ××•×¦×¨ ×–×”
    </button>
  </div>

</div>
<!-- â•â•â•â•â•â•â• END SIDE â•â•â•â•â•â•â• -->

</div><!-- wrap -->

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// âš™ï¸ ××—×™×¨×•×Ÿ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const C = {
  // ×¢×œ×•×ª ×”×“×¤×¡×” â‚ª ×œ×¢××•×“
  printRate: { color:0.07, bw:0.015 },
  // ×¢×œ×•×ª ×¤×¢×™××” (setup) â‚ª ×œ×“×£ A4
  setupA4: 0.015,
  // ×¢×œ×•×ª × ×™×™×¨ â‚ª ×œ×“×£ (2 ×¢××•×“×™×)
  paper: {
    a4:    { offset80:0.0276, chrome130:0.055, premium170:0.075 },
    a5:    { offset80:0.0138, chrome130:0.0275,premium170:0.0375 },
    half8: { offset80:0.0248, chrome130:0.050, premium170:0.068 },  // 175Ã—248 â‰ˆ 90% ×-A4
    a3:    { offset80:0.051,  chrome130:0.118, premium170:0.168 },
  },
  // ×œ××™× ×¦×™×”
  lam:    { none:{mat:0,min:0}, matte:{mat:0.45,min:0.3}, glossy:{mat:0.45,min:0.3} },
  lamMin: 20,
  vat:       0.18,
  minOrder:  30,   // ××—×™×¨ ××™× ×™××•× ×œ×¤× ×™ ××¢×
  maxWarnAt: 5000,
};

function ×¢×“×›×Ÿ×’×•×“×œ(){
  // A3 ×–××™×Ÿ ×¨×§ ×‘×¡×¤×™×¨×œ×”
  const opt = document.getElementById('opt-a3');
  if(opt){
    opt.disabled = bookType !== 'wire';
    opt.style.display = bookType !== 'wire' ? 'none' : '';
  }
  // ×× A3 × ×‘×—×¨ ××‘×œ ×œ× ×‘×¡×¤×™×¨×œ×” â€” ××¤×¡ ×œ-A4
  const sel = document.getElementById('paperSize');
  if(sel.value === 'a3' && bookType !== 'wire') sel.value = 'a4';
  ×—×©×‘××—×™×¨();
}

function setupFactor(sz){ return sz==='a5'?.5:sz==='half8'?.9:sz==='a3'?2:1; }

// â”€â”€ Markup ×¢×œ ×”×“×¤×¡×” + × ×™×™×¨ (××›×•×™×œ: 8 ×¢×' x1 â‰ˆ â‚ª10, 24 ×¢×' x50 â‰ˆ â‚ª375) â”€â”€
function mkPrint(qty){
  if(qty<=5)   return 6.0;
  if(qty<=10)  return 5.0;
  if(qty<=25)  return 4.2;
  if(qty<=50)  return 4.0;
  if(qty<=100) return 3.2;
  if(qty<=250) return 2.5;
  if(qty<=500) return 2.0;
  return 1.6;
}

// â”€â”€ ××—×™×¨ ×›×¨×™×›×” ×œ×œ×§×•×— (â‚ª ×œ×¤× ×™ ××¢×, ×œ×›×œ ×”×”×–×× ×”) â”€â”€
// ××‘×•×¡×¡ ×¢×œ ××—×™×¨ ×¨×™××œ×™ â€” ×œ× ×—×™×©×•×‘ ×©×¢×ª×™
function bindCharge(type, qty, pages){
  if(type==='saddle'){
    // ×¡×™×›×•×ª: â‚ª4/×™×—' ×‘×›××•×ª ×§×˜× ×”, ×™×•×¨×“ ×‘×›××•×ª, ××™× ×™××•× â‚ª8
    const u = qty<=5?4:qty<=25?3.2:qty<=100?2.8:2.2;
    return Math.max(8, u*qty);
  }
  if(type==='perfect'){
    // ×“×‘×§: ×™×§×¨ ×™×•×ª×¨ â€” ×¢×˜×™×¤×” + ×“×‘×§
    const u = qty<=5?7:qty<=25?5.5:qty<=100?4.5:3.5;
    return Math.max(15, u*qty);
  }
  // ×¡×¤×™×¨×œ×”: ×ª×œ×•×™ ×‘×¢××•×“×™×
  const base = pages>100?7:5; // ×©×§×£ ×¢×‘×”/×¨×’×™×œ
  const u = qty<=5?base+3:qty<=25?base+2.5:qty<=100?base+2:base+1.5;
  return Math.max(20, u*qty);
}

function minUnitPrice(){ return 0; } // ×œ× ×‘×©×™××•×© â€” minOrder ××˜×¤×œ
function tierName(qty){
  if(qty<=5)   return "ğŸ”´ ××™× ×™××œ×™";
  if(qty<=10)  return "ğŸŸ  ×§×˜×Ÿ";
  if(qty<=25)  return "ğŸŸ¡ ×‘×™× ×•× ×™";
  if(qty<=50)  return "ğŸŸ¢ ×¡×˜× ×“×¨×˜×™";
  if(qty<=100) return "ğŸ”µ ×’×“×•×œ";
  if(qty<=250) return "ğŸŸ£ ××¡×—×¨×™";
  if(qty<=500) return "âš« ×ª×¢×©×™×™×ª×™";
  return "ğŸ’ ×¤×œ×•×¡";
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ××¦×‘
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let bookType  = 'saddle';
let printType = 'bw';
let sideType  = 'double';
let lamType   = 'none';
let coverType = 'chrome250';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ××¤×¡ ×”×›×œ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function ××¤×¡×”×›×œ(){
  document.getElementById('quantity').value = '1';
  document.getElementById('pages').value    = '4';
  document.getElementById('paperSize').value = 'a4';
  document.getElementById('paperType').value = 'offset80';
  document.querySelectorAll('.pill').forEach(b=>b.classList.remove('on'));
  document.querySelector('.pill').classList.add('on'); // ×œ×œ×
  lamType   = 'none';
  sideType  = 'double';
  ×‘×—×¨×¡×•×’('saddle');
  ×‘×—×¨×”×“×¤×¡×”('bw');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ×‘×—×™×¨×•×ª
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function ×‘×—×¨×¡×•×’(t){
  bookType = t;
  ['saddle','perfect','wire'].forEach(x=>
    document.getElementById('btn-'+x).classList.toggle('on',x===t));
  const isSaddle = t==='saddle';
  document.getElementById('saddleNote').style.display = isSaddle?'flex':'none';
  document.getElementById('doubleSideWrap').style.display = isSaddle?'none':'';
  if(isSaddle) sideType='double';

  const step = isSaddle?4:1;
  document.getElementById('pgUp').onmousedown = ()=>startSpin('pages', step);
  document.getElementById('pgDn').onmousedown = ()=>startSpin('pages',-step);
  document.getElementById('pgUp').ontouchstart= ()=>startSpin('pages', step);
  document.getElementById('pgDn').ontouchstart= ()=>startSpin('pages',-step);
  document.getElementById('pages').onwheel = e=>×’×œ×’×œ(e,'pages',step);
  document.getElementById('pgHintLbl').textContent = isSaddle?'(Ã—4)':'';

  ×¢×“×›×Ÿ×›×¨×™×›×•×ª();
  ×¢×“×›×Ÿ×’×•×“×œ();
  ×ª×§×Ÿ×¢××•×“×™×();
}

function ×‘×—×¨×”×“×¤×¡×”(t){
  printType=t;
  document.getElementById('btn-color').classList.toggle('on',t==='color');
  document.getElementById('btn-bw').classList.toggle('on',t==='bw');
  ×—×©×‘××—×™×¨();
}

function ×‘×—×¨×¦×“(t){
  sideType=t;
  document.getElementById('btn-double').classList.toggle('on',t==='double');
  document.getElementById('btn-single').classList.toggle('on',t==='single');
  ×—×©×‘××—×™×¨();
}

function ×‘×—×¨×œ××™× ×¦×™×”(btn,t){
  lamType=t;
  document.querySelectorAll('.pill').forEach(b=>b.classList.remove('on'));
  btn.classList.add('on');
  ×—×©×‘××—×™×¨();
}

function ×‘×—×¨×›×¨×™×›×”(t){
  coverType=t;
  document.querySelectorAll('.cover-opt').forEach(b=>b.classList.toggle('on',b.dataset.val===t));
  ×—×©×‘××—×™×¨();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ×›×¨×™×›×•×ª ×“×™× ××™×•×ª
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function ×¢×“×›×Ÿ×›×¨×™×›×•×ª(){
  const pages = parseInt(document.getElementById('pages').value)||4;
  const optEl = document.getElementById('coverOptions');
  const hint  = document.getElementById('coverHint');
  let opts=[];

  if(bookType==='saddle'){
    opts=[{val:'chrome250',label:'×›×¨×•××• 250 ×’×¨×',sub:'××•××œ×¥'}];
    hint.textContent='×’×‘ ×•×¢×˜×™×¤×” ×¢×œ ×›×¨×•××• 250 ×’×¨×';
  } else if(bookType==='perfect'){
    opts=[{val:'chrome350',label:'×›×¨×•××• 350 ×’×¨×',sub:'××•××œ×¥'}];
    hint.textContent='×¢×˜×™×¤×” ×§×©×™×—×” ×¢×œ ×›×¨×•××• 350 ×’×¨×';
  } else {
    opts=[
      {val:'transparent',label:'×©×§×£ PVC',sub:'×§×œ××¡×™'},
      {val:'chrome350',  label:'×›×¨×•××• 350 ×’×¨×',sub:'××•×—×©×™'},
    ];
    hint.textContent = pages>100?'×©×§×£ ×¢×‘×”: â‚ª6 | ×›×¨×•××•: ×¢×˜×™×¤×” ××œ××”':'×©×§×£: â‚ª4 | ×›×¨×•××•: ×¢×˜×™×¤×” ××œ××”';
  }

  optEl.innerHTML='';
  if(!opts.find(o=>o.val===coverType)) coverType=opts[0].val;
  opts.forEach(o=>{
    const b=document.createElement('button');
    b.className='tb cover-opt'+(o.val===coverType?' on':'');
    b.dataset.val=o.val;
    b.onclick=()=>×‘×—×¨×›×¨×™×›×”(o.val);
    b.innerHTML=`<span class="nm">${o.label}</span><span class="sub">${o.sub}</span>`;
    optEl.appendChild(b);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ×¢××•×“×™× â€” ×××¤×©×¨ ×¢×¨×™×›×” ×—×•×¤×©×™×ª, ×ª×™×§×•×Ÿ ×¨×§ ×‘-blur
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function ×“×—×™×™×ª×¢××•×“×™×(){
  // ×¨×§ ××—×©×‘ ××—×™×¨, ×œ× ×›×•×¤×” ×¢×¨×š ×‘×–××Ÿ ×”×§×œ×“×”
  const v = parseInt(document.getElementById('pages').value)||0;
  if(v >= (bookType==='saddle'?4:1)) ×—×©×‘××—×™×¨();
}

function ×ª×§×Ÿ×¢××•×“×™×(){
  const inp=document.getElementById('pages');
  let v=parseInt(inp.value)||4;
  if(v<1) v=1;
  let warned=false;
  if(bookType==='saddle'){
    if(v<4) v=4;
    const r=Math.ceil(v/4)*4;
    if(r!==v) warned=true;
    v=r;
  }
  inp.value=v;
  document.getElementById('pgHint').textContent =
    bookType==='saddle'? v+' ×¢×\' = '+v/2+' ×’×™×œ×™×•× ×•×ª':'';
  document.getElementById('warnBox').style.display = warned?'flex':'none';
  ×¢×“×›×Ÿ×›×¨×™×›×•×ª();
  ×—×©×‘××—×™×¨();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ×¡×¤×™× ×¨ â€” ×œ×—×™×¦×” ×××•×©×›×ª ×××™×¦×”
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let spinTimer=null, spinInterval=null;

function startSpin(id, d){
  clearSpin();
  ×©× ×”Immediate(id,d);
  spinTimer = setTimeout(()=>{
    spinInterval = setInterval(()=>×©× ×”Immediate(id,d),80);
  },400);
  const stop = ()=>clearSpin();
  document.addEventListener('mouseup',  stop, {once:true});
  document.addEventListener('touchend', stop, {once:true});
}

function clearSpin(){
  clearTimeout(spinTimer);
  clearInterval(spinInterval);
}

function ×©× ×”Immediate(id, d){
  const inp=document.getElementById(id);
  let v=parseFloat(inp.value)||0;
  v+=d;
  if(id==='pages'){
    const min=bookType==='saddle'?4:1;
    v=Math.max(min,v);
    if(bookType==='saddle') v=Math.round(v/4)*4;
    inp.value=v;
    document.getElementById('pgHint').textContent =
      bookType==='saddle'? v+' ×¢×\' = '+v/2+' ×’×™×œ×™×•× ×•×ª':'';
    ×¢×“×›×Ÿ×›×¨×™×›×•×ª();
  } else {
    v=Math.max(1,v);
    inp.value=v;
  }
  ×—×©×‘××—×™×¨();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ×’×œ×’×œ×ª ×¢×›×‘×¨
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function ×’×œ×’×œ(e, id, step){
  e.preventDefault();
  const d = e.deltaY<0 ? step : -step;
  ×©× ×”Immediate(id, d);
}

// ×’×œ×’×œ×ª ×œ×›××•×ª
document.addEventListener('DOMContentLoaded',()=>{
  document.getElementById('quantity').addEventListener('wheel', e=>×’×œ×’×œ(e,'quantity',1), {passive:false});
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Enter â†’ ×”×‘×
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const FIELDS=['quantity','pages','paperSize','paperType'];
function ×˜××‘(e,id){
  if(e.key!=='Enter') return;
  if(id==='pages') ×ª×§×Ÿ×¢××•×“×™×();
  e.preventDefault();
  const i=FIELDS.indexOf(id);
  if(i>=0&&i<FIELDS.length-1) document.getElementById(FIELDS[i+1]).focus();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ×—×™×©×•×‘ ×œ×—×•×‘×¨×ª ××—×ª â€” ××—×™×¨ ××›×™×¨×” (×œ× ×¢×œ×•×ª)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function calcSale(qty, pages, sz, paper){
  const isSingle=(sideType==='single' && bookType!=='saddle');
  const sheets=isSingle?pages:pages/2;

  // ×”×“×¤×¡×” + × ×™×™×¨ â€” ×¢×œ×•×ª ×™×©×™×¨×” Ã— markup
  const printCostDirect = pages*C.printRate[printType] + sheets*setupFactor(sz)*C.setupA4;
  const paperCostDirect = sheets*(C.paper[sz]?.[paper]||C.paper.a4.offset80);
  const ppSell = (printCostDirect+paperCostDirect)*qty*mkPrint(qty);

  // ×›×¨×™×›×” â€” ××—×™×¨ ×™×©×™×¨ ×œ×›×œ ×”×”×–×× ×”
  const bindSell = bindCharge(bookType, qty, pages);

  // ×œ××™× ×¦×™×”
  const L=C.lam[lamType];
  const minRate=180/60;
  const lamCostDirect=(L.mat+L.min*minRate)*qty;
  const lamSell=lamType!=='none'?Math.max(C.lamMin,lamCostDirect*mkPrint(qty)):0;

  const total=Math.max(C.minOrder, ppSell+bindSell+lamSell);

  return{
    print:  ppSell,
    paper:  0,   // ×›×‘×¨ ×‘×ª×•×š print
    finish: bindSell,
    lam:    lamSell,
    total,
  };
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ×—×™×©×•×‘ ×¨××©×™
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function ×—×©×‘××—×™×¨(){
  const qty  =Math.max(1,parseInt(document.getElementById('quantity').value)||1);
  const pages=Math.max(1,parseInt(document.getElementById('pages').value)||4);
  const sz   =document.getElementById('paperSize').value;
  const paper=document.getElementById('paperType').value;

  const s=calcSale(qty,pages,sz,paper);
  const sale=s.total;
  const withVAT=sale*(1+C.vat);
  const perUnit=sale/qty;

  const szN  ={a4:'A4',a5:'A5',half8:'×—×¦×™ ×©××™× ×™×ª',a3:'A3'}[sz];
  const bkN  ={saddle:'×¡×™×›×•×ª',perfect:'×“×‘×§',wire:'×¡×¤×™×¨×œ×”'}[bookType];
  const prN  ={color:'×¦×‘×¢',bw:'×©×—×•×¨-×œ×‘×Ÿ'}[printType];
  const sdN  =bookType==='saddle'?'×“×•-×¦×“×“×™':{double:'×“×•-×¦×“×“×™',single:'×—×“-×¦×“×“×™'}[sideType];
  const lamN2={none:'',matte:' Â· ××˜',glossy:' Â· ××‘×¨×™×§'}[lamType];

  document.getElementById('summaryTitle').textContent  =`×—×•×‘×¨×ª ${bkN} ${szN}`;
  document.getElementById('summaryDetails').textContent=`${qty} ×™×—×™×“×•×ª Â· ${pages} ×¢×' Â· ${prN} Â· ${sdN}${lamN2}`;

  const f2=n=>'â‚ª'+n.toFixed(2);
  document.getElementById('costPrint').textContent   =f2(s.print);
  document.getElementById('costPaper').textContent   ='×›×œ×•×œ ×‘×”×“×¤×¡×”';
  document.getElementById('costBinding').textContent =f2(s.finish);
  document.getElementById('costLam').textContent     =s.lam>0?f2(s.lam):'â‚ª0.00';
  document.getElementById('costBeforeVat').textContent=f2(sale);
  document.getElementById('pricePerUnit').textContent =f2(perUnit);
  document.getElementById('totalWithVat').textContent ='â‚ª'+withVAT.toFixed(0);
  document.getElementById('totalNoVat').textContent   =`×œ×¤× ×™ ××¢"×: ${f2(sale)}`;
  document.getElementById('tierLabel').textContent    =tierName(qty);

  const mn=document.getElementById('minNote');
  if(sale<=C.minOrder+0.01){mn.textContent='âš ï¸ ××—×™×¨ ××™× ×™××•× â‚ª'+C.minOrder+' ×”×•×¤×¢×œ';mn.style.display='block';}
  else mn.style.display='none';
  document.getElementById('maxWarn').style.display=withVAT>C.maxWarnAt?'block':'none';

  buildTier(qty,pages,sz,paper);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ××“×¨×’
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildTier(cur,pages,sz,paper){
  const rows=[1,5,10,25,50,100,250,500,1000];
  let h=`<table><thead><tr>
    <th>×›××•×ª</th><th>××—×™×¨ ×œ×™×—×™×“×”</th><th>×œ×¤× ×™ ××¢"×</th><th>×›×•×œ×œ ××¢"×</th>
  </tr></thead><tbody>`;
  rows.forEach(q=>{
    const s=calcSale(q,pages,sz,paper);
    const wv=s.total*(1+C.vat);
    const pu=s.total/q;
    const hl=q===cur?' class="hl"':'';
    const ov=wv>C.maxWarnAt?' style="color:#dc2626;"':'';
    h+=`<tr${hl}><td><strong>${q.toLocaleString()}</strong></td>
      <td style="color:#6366f1;font-weight:800;">â‚ª${pu.toFixed(2)}</td>
      <td style="font-weight:700;">â‚ª${s.total.toFixed(0)}</td>
      <td${ov} style="font-weight:800;">â‚ª${wv.toFixed(0)}${wv>C.maxWarnAt?' âš ï¸':''}</td></tr>`;
  });
  h+='</tbody></table>';
  document.getElementById('tierTable').innerHTML=h;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ×©×œ×™×—×ª ×”×–×× ×” ×œ×•×•××˜×¡××¤
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function ×©×œ×—×•×•××˜×¡××¤(){
  const title   = document.getElementById('summaryTitle').textContent;
  const details = document.getElementById('summaryDetails').textContent;
  const print   = document.getElementById('costPrint').textContent;
  const binding = document.getElementById('costBinding').textContent;
  const lam     = document.getElementById('costLam').textContent;
  const beforeV = document.getElementById('costBeforeVat').textContent;
  const perUnit = document.getElementById('pricePerUnit').textContent;
  const total   = document.getElementById('totalWithVat').textContent;

  const msg =
`ğŸ–¨ï¸ *×”×–×× ×ª ×”×“×¤×¡×” â€” ×¤×¨×™× ×˜-×¤×¨×• ×¡×˜×•×“×™×•*

ğŸ“‹ *××•×¦×¨:* ${title}
ğŸ“Œ *×¤×¨×˜×™×:* ${details}

ğŸ’° *×¤×™×¨×•×˜ ××—×™×¨:*
â€¢ ×”×“×¤×¡×” ×•× ×™×™×¨: ${print}
â€¢ ×›×¨×™×›×” ×•×’×™××•×¨: ${binding}
â€¢ ×œ××™× ×¦×™×”: ${lam}
â€¢ ×¡×”"×› ×œ×¤× ×™ ××¢"×: ${beforeV}
â€¢ ××—×™×¨ ×œ×™×—×™×“×”: ${perUnit}

âœ… *×¡×”"×› ×œ×ª×©×œ×•× (×›×•×œ×œ ××¢"× 18%): ${total}*

××©××— ×œ××©×¨ ××ª ×”×”×–×× ×” ğŸ™`;

  const phone = '972775120070';
  const url = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
  window.open(url, '_blank');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ×©×œ×— ×œ×•×•××˜×¡××¤
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function ×©×œ×—×•×•××˜×¡××¤(){
  const title   = document.getElementById('summaryTitle').textContent;
  const details = document.getElementById('summaryDetails').textContent;
  const print   = document.getElementById('costPrint').textContent;
  const binding = document.getElementById('costBinding').textContent;
  const lam     = document.getElementById('costLam').textContent;
  const beforeV = document.getElementById('costBeforeVat').textContent;
  const perUnit = document.getElementById('pricePerUnit').textContent;
  const total   = document.getElementById('totalWithVat').textContent;
  const date    = new Date().toLocaleDateString('he-IL');

  const msg =
`âœ‰ï¸ *×‘×§×©×ª ×”×–×× ×” â€” ×¤×¨×™× ×˜-×¤×¨×• ×¡×˜×•×“×™×•*
×ª××¨×™×š: ${date}

ğŸ“‹ *××•×¦×¨:* ${title}
ğŸ“ *×¤×¨×˜×™×:* ${details}

ğŸ’° *×¤×™×¨×•×˜ ××—×™×¨:*
â€¢ ×”×“×¤×¡×” ×•× ×™×™×¨: ${print}
â€¢ ×›×¨×™×›×” ×•×’×™××•×¨: ${binding}
â€¢ ×œ××™× ×¦×™×”: ${lam}
â€¢ ×¡×”"×› ×œ×¤× ×™ ××¢"×: ${beforeV}
â€¢ ××—×™×¨ ×œ×™×—×™×“×”: ${perUnit}

âœ… *×¡×”"×› ×œ×ª×©×œ×•× (×›×•×œ×œ ××¢"× 18%): ${total}*

_* ×”××—×™×¨ ×ª×§×£ ×œ-14 ×™×•× ×××•×¢×“ ×”×¦×¢×” ×–×•_`;

  const phone = '972775120070';
  const encoded = encodeURIComponent(msg);
  window.open(`https://wa.me/${phone}?text=${encoded}`, '_blank');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ×”×¤×¢×œ×”
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
×‘×—×¨×¡×•×’('saddle');
×‘×—×¨×”×“×¤×¡×”('bw');
×—×©×‘××—×™×¨();
</script>
</body>
</html>